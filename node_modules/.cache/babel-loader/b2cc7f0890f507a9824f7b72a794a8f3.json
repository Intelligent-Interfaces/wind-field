{"ast":null,"code":"import _slicedToArray from \"/Users/erickoduniyi/Desktop/affective_chaos_control/Emulators/wind-field/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/erickoduniyi/Desktop/affective_chaos_control/Emulators/wind-field/src/components/Display/index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Box } from '../Box';\nimport styled from '../../styled';\nimport Machine from '../../engine/MachineSubject';\nimport { MachineStateMode } from '../../interfaces';\nimport { Slot } from '../Slot';\nimport { TapeDisplay } from '../TapeDisplay';\nimport { SynthDisplay } from '../SynthDisplay';\nconst DisplayStyles = styled(Box)`\n  background: ${props => props.theme.colors.dark};\n  border-radius: 6px;\n  // border: 3px solid #9F98F5;\n  border: 3px solid #B78963;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(6, 1fr);\n  height: 100%;\n  padding: 8px;\n\n  * {\n    margin: 0;\n    color: white;\n    user-select: none;\n  }\n\n  canvas {\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nconst Display = () => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const _useState3 = useState(MachineStateMode.Synth),\n        _useState4 = _slicedToArray(_useState3, 2),\n        mode = _useState4[0],\n        setMode = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        subject = _useState6[0],\n        setSubject = _useState6[1];\n\n  useEffect(() => {\n    const sub = Machine.state$.subscribe(next => {\n      setState(next);\n      setMode(next.mode);\n      setSubject(next.slots.find(slot => slot.active));\n    });\n    return () => sub.unsubscribe();\n  }, []);\n\n  const synthVisual = () => {\n    return React.createElement(SynthDisplay, {\n      slot: subject,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  };\n\n  const tapeVisual = () => {\n    return React.createElement(TapeDisplay, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    });\n  };\n\n  const visual = () => {\n    switch (mode) {\n      case MachineStateMode.Synth:\n        return synthVisual();\n\n      case MachineStateMode.Tape:\n        return tapeVisual();\n\n      default:\n        break;\n    }\n  };\n\n  return React.createElement(DisplayStyles, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(Slot, {\n    placement: \"1 / 1 / span 1 / span 1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Mode: \", state && state.mode.toUpperCase())), React.createElement(Slot, {\n    placement: \"1 / 4 / span 1 / span 1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"BPM: \", state && state.bpm)), React.createElement(Slot, {\n    placement: \"2 / 1 / span 4 / span 4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, visual()), React.createElement(Slot, {\n    placement: \"6 / 1 / span 1 / span 1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, state && state.note)), React.createElement(Slot, {\n    placement: \"6 / 4 / span 1 / span 1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Octave: \", state && state.octave)));\n};\n\nexport { Display };","map":{"version":3,"sources":["/Users/erickoduniyi/Desktop/affective_chaos_control/Emulators/wind-field/src/components/Display/index.tsx"],"names":["React","useEffect","useState","Box","styled","Machine","MachineStateMode","Slot","TapeDisplay","SynthDisplay","DisplayStyles","props","theme","colors","dark","Display","state","setState","Synth","mode","setMode","subject","setSubject","sub","state$","subscribe","next","slots","find","slot","active","unsubscribe","synthVisual","tapeVisual","visual","Tape","toUpperCase","bpm","note","octave"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box } from '../Box';\nimport styled from '../../styled';\nimport Machine from '../../engine/MachineSubject';\nimport { MachineState, MachineStateMode, SynthSubjectType } from '../../interfaces';\nimport { Slot } from '../Slot';\nimport { TapeDisplay } from '../TapeDisplay';\nimport { SynthDisplay } from '../SynthDisplay';\n\nconst DisplayStyles = styled(Box)`\n  background: ${props => props.theme.colors.dark};\n  border-radius: 6px;\n  // border: 3px solid #9F98F5;\n  border: 3px solid #B78963;\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(6, 1fr);\n  height: 100%;\n  padding: 8px;\n\n  * {\n    margin: 0;\n    color: white;\n    user-select: none;\n  }\n\n  canvas {\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nconst Display: React.FC<any> = () => {\n\n  const [state, setState] = useState<MachineState>();\n  const [mode, setMode] = useState<MachineStateMode>(MachineStateMode.Synth);\n  const [subject, setSubject] = useState<SynthSubjectType>();\n\n  useEffect(\n    () => {\n      const sub = Machine.state$.subscribe((next: MachineState) => {\n        setState(next);\n        setMode(next.mode);\n        setSubject(next.slots.find((slot: any) => slot.active))\n      });\n\n      return () => sub.unsubscribe();\n    },\n    []\n  );\n\n  const synthVisual = () => {\n    return (\n      <SynthDisplay slot={subject} />\n    );\n  };\n\n  const tapeVisual = () => {\n    return (\n      <TapeDisplay />\n    );\n  }\n\n  const visual = () => {\n    switch (mode) {\n      case MachineStateMode.Synth:\n        return synthVisual();\n      case MachineStateMode.Tape:\n        return tapeVisual();\n      default:\n        break;\n    }\n  }\n\n  return (\n    <DisplayStyles>\n      <Slot placement=\"1 / 1 / span 1 / span 1\">\n        <h3>Mode: {state && state.mode.toUpperCase()}</h3>\n      </Slot>\n\n      <Slot placement=\"1 / 4 / span 1 / span 1\">\n        <h3>BPM: {state && state.bpm}</h3>\n      </Slot>\n\n      <Slot placement=\"2 / 1 / span 4 / span 4\">\n        {visual()}\n      </Slot>\n\n      <Slot placement=\"6 / 1 / span 1 / span 1\">\n        <h3>{state && state.note}</h3>\n      </Slot>\n      <Slot placement=\"6 / 4 / span 1 / span 1\">\n        <h3>Octave: {state && state.octave}</h3>\n      </Slot>\n    </DisplayStyles>\n  );\n}\n\nexport { Display };\n"]},"metadata":{},"sourceType":"module"}